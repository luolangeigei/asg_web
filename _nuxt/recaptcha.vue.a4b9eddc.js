import{f as U,u as H,c as P}from"./Skeleton.d0bf2de9.js";import{w as B,c as w,f as T,J as O}from"./Button.63a0d42a.js";import{l as X,d as J,F as L,ab as G,f as A,q as Q,h as W,j as $,C as Y,r as k,m as N,y as ee,i as te,o as ne,c as re}from"./entry.305413a9.js";import{o as S,a as b,g as ie}from"./index.4b45c8c6.js";import{o as ae}from"./ready.f076efb2.js";function ye(e,t="default",r=void 0){const n=e[t];if(!n)return B("getFirstSlotVNode",`slot[${t}] is empty`),null;const i=U(n(r));return i.length===1?i[0]:(B("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function ge(){return X()!==null}const xe=typeof window<"u",be=w("n-modal-body"),we=w("n-modal"),Ie=w("n-drawer-body"),ve=w("n-drawer"),Ee=w("n-popover-body");function C(e,t,r="default"){const n=t[r];if(n===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);return n()}function Z(e,t=!0,r=[]){return e.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&r.push(J(String(n)));return}if(Array.isArray(n)){Z(n,t,r);return}if(n.type===L){if(n.children===null)return;Array.isArray(n.children)&&Z(n.children,t,r)}else n.type!==G&&r.push(n)}}),r}function Te(e,t,r="default"){const n=t[r];if(n===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);const i=Z(n());if(i.length===1)return i[0];throw new Error(`[vueuc/${e}]: slot[${r}] should have exactly one child.`)}const m="@@coContext",oe={mounted(e,{value:t,modifiers:r}){e[m]={handler:void 0},typeof t=="function"&&(e[m].handler=t,S("clickoutside",e,t,{capture:r.capture}))},updated(e,{value:t,modifiers:r}){const n=e[m];typeof t=="function"?n.handler?n.handler!==t&&(b("clickoutside",e,n.handler,{capture:r.capture}),n.handler=t,S("clickoutside",e,t,{capture:r.capture})):(e[m].handler=t,S("clickoutside",e,t,{capture:r.capture})):n.handler&&(b("clickoutside",e,n.handler,{capture:r.capture}),n.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:r}=e[m];r&&b("clickoutside",e,r,{capture:t.capture}),e[m].handler=void 0}},$e=oe;function se(e,t){console.error(`[vdirs/${e}]: ${t}`)}class ce{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,r){const{elementZIndex:n}=this;if(r!==void 0){t.style.zIndex=`${r}`,n.delete(t);return}const{nextZIndex:i}=this;n.has(t)&&n.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,n.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t,r){const{elementZIndex:n}=this;n.has(t)?n.delete(t):r===void 0&&se("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((r,n)=>r[1]-n[1]),this.nextZIndex=2e3,t.forEach(r=>{const n=r[0],i=this.nextZIndex++;`${i}`!==n.style.zIndex&&(n.style.zIndex=`${i}`)})}}const z=new ce,y="@@ziContext",ue={mounted(e,t){const{value:r={}}=t,{zIndex:n,enabled:i}=r;e[y]={enabled:!!i,initialized:!1},i&&(z.ensureZIndex(e,n),e[y].initialized=!0)},updated(e,t){const{value:r={}}=t,{zIndex:n,enabled:i}=r,s=e[y].enabled;i&&!s&&(z.ensureZIndex(e,n),e[y].initialized=!0),e[y].enabled=!!i},unmounted(e,t){if(!e[y].initialized)return;const{value:r={}}=t,{zIndex:n}=r;z.unregister(e,n)}},Se=ue;function q(e){return typeof e=="string"?document.querySelector(e):e()}const Fe=A({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:H(Q(e,"show")),mergedTo:W(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?C("lazy-teleport",this.$slots):$(Y,{disabled:this.disabled,to:this.mergedTo},C("lazy-teleport",this.$slots)):null}});function R(e){return e instanceof HTMLElement}function D(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(R(r)&&(K(r)||D(r)))return!0}return!1}function M(e){for(let t=e.childNodes.length-1;t>=0;t--){const r=e.childNodes[t];if(R(r)&&(K(r)||M(r)))return!0}return!1}function K(e){if(!le(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function le(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let x=[];const ze=A({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=P(),r=k(null),n=k(null);let i=!1,s=!1;const g=typeof document>"u"?null:document.activeElement;function c(){return x[x.length-1]===t}function f(a){var o;a.code==="Escape"&&c()&&((o=e.onEsc)===null||o===void 0||o.call(e,a))}N(()=>{ee(()=>e.active,a=>{a?(I(),S("keydown",document,f)):(b("keydown",document,f),i&&p())},{immediate:!0})}),te(()=>{b("keydown",document,f),i&&p()});function h(a){if(!s&&c()){const o=l();if(o===null||o.contains(ie(a)))return;u("first")}}function l(){const a=r.value;if(a===null)return null;let o=a;for(;o=o.nextSibling,!(o===null||o instanceof Element&&o.tagName==="DIV"););return o}function I(){var a;if(!e.disabled){if(x.push(t),e.autoFocus){const{initialFocusTo:o}=e;o===void 0?u("first"):(a=q(o))===null||a===void 0||a.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",h,!0)}}function p(){var a;if(e.disabled||(document.removeEventListener("focus",h,!0),x=x.filter(v=>v!==t),c()))return;const{finalFocusTo:o}=e;o!==void 0?(a=q(o))===null||a===void 0||a.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&g instanceof HTMLElement&&(s=!0,g.focus({preventScroll:!0}),s=!1)}function u(a){if(c()&&e.active){const o=r.value,v=n.value;if(o!==null&&v!==null){const E=l();if(E==null||E===v){s=!0,o.focus({preventScroll:!0}),s=!1;return}s=!0;const V=a==="first"?D(E):M(E);s=!1,V||(s=!0,o.focus({preventScroll:!0}),s=!1)}}}function d(a){if(s)return;const o=l();o!==null&&(a.relatedTarget!==null&&o.contains(a.relatedTarget)?u("last"):u("first"))}function F(a){s||(a.relatedTarget!==null&&a.relatedTarget===r.value?u("last"):u("first"))}return{focusableStartRef:r,focusableEndRef:n,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:d,handleEndFocus:F}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:r}=this;return $(L,null,[$("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),e(),$("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}}),{cubicBezierEaseIn:_,cubicBezierEaseOut:j}=O;function ke({transformOrigin:e="inherit",duration:t=".2s",enterScale:r=".9",originalTransform:n="",originalTransition:i=""}={}){return[T("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${_}, transform ${t} ${_} ${i&&","+i}`}),T("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${j}, transform ${t} ${j} ${i&&","+i}`}),T("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${n} scale(${r})`}),T("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${n} scale(1)`})]}const Ze=A({__name:"recaptcha",props:{sitekey:{type:String,required:!1,default:"6LcdXUEmAAAAACHoMlbHRilEp6pTwoMctq-8P0g9"},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"light"},hl:{type:String,required:!1,default:"zh-CN"},loadingTimeout:{type:Number,required:!1,default:3e4}},emits:{verify:e=>e!=null&&e!="",error:e=>{}},setup(e,{expose:t,emit:r}){const n=e,i=k(null);let s=null;t({execute:function(){window.grecaptcha.execute(s)},reset:function(){window.grecaptcha.reset(s)}});function g(){s=window.grecaptcha.render(i.value,{sitekey:n.sitekey,theme:n.theme,size:n.size,callback:c=>r("verify",c),"expired-callback":()=>window.grecaptcha.reset(s),"error-callback":()=>window.grecaptcha.reset(s)})}return ae(()=>{window.grecaptcha==null?new Promise((c,f)=>{let h,l=!1;window.recaptchaReady=function(){l||(l=!0,clearTimeout(h),c())};const I="recaptcha-script",p=F=>()=>{var a;l||(l=!0,clearTimeout(h),(a=document.getElementById(I))==null||a.remove(),f(F))};n.loadingTimeout>0&&(h=setTimeout(p("timeout"),n.loadingTimeout));const u=window.document,d=u.createElement("script");d.id=I,d.onerror=p("error"),d.onabort=p("aborted"),d.setAttribute("src",`https://www.recaptcha.net/recaptcha/api.js?onload=recaptchaReady&render=explicit&hl=${n.hl}&_=${+new Date}`),u.head.appendChild(d)}).then(()=>{g()}).catch(c=>{r("error",c)}):g()}),(c,f)=>(ne(),re("div",{ref_key:"recaptchaDiv",ref:i},null,512))}});export{ze as F,Fe as L,Ze as _,Te as a,ye as b,$e as c,Ie as d,we as e,ke as f,C as g,ge as h,xe as i,ve as j,be as m,Ee as p,Se as z};
