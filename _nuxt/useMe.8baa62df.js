import{a6 as n}from"./entry.f4d2fbff.js";import{e as t,b as u,c as l}from"./index.0deabf0b.js";const d={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px",closeMarginRtl:"0 4px 0 0"},c=()=>{t("token",null).value=null;const{destroy:e}=m();e()},i=async()=>{var s,o;const e=t("token",null).value;if(!e)throw Error("未登录");const{data:r,error:a}=await u("/user",{baseURL:"https://124.223.35.239/api/v1",headers:{authorization:`Bearer ${e}`}},"$ctCRYusCin");if(!a.value)return r;throw a.value.statusCode===401?(c(),Error("登录过期，请重新登录")):a.value.statusCode===500?Error("服务端错误，请联系网站管理员"):Error(((s=a.value.data)==null?void 0:s.message)??a.value.message??((o=a.value.data)==null?void 0:o.code))},m=()=>{const e=n("me",()=>null),r=l();return{destroy(){e.value=null},me:e,update:async()=>{try{e.value=(await i()).value}catch(s){if(!(s instanceof Error))throw s;if(s.message==="未登录"||s.message==="登录过期，请重新登录")return r.warning(s.message),null;throw Error(s.message)}return e}}};export{m as a,d as c,c as u};
