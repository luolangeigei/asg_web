import{U as a}from"./entry.06270264.js";import{c as r,u as n}from"./index.558dc2d0.js";import{u}from"./useUnknownError.cf86b399.js";const d={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px",closeMarginRtl:"0 4px 0 0"},l=()=>{r("token",null).value=null;const{destroy:e}=i();e()},c=async()=>{const e=r("token",null).value;if(!e)throw Error("no token");const{data:s,error:o}=await n("/user",{baseURL:"https://124.223.35.239/api/v1",headers:{authorization:`Bearer ${e}`}},"$ctCRYusCin");if(o.value)throw o.value.statusCode===401?(l(),Error("token expired")):o;return s},i=()=>{const e=a("me",()=>null),s=u();return{destroy(){e.value=null},me:e,update:async()=>{try{e.value=(await c()).value}catch(t){if(t.message==="no token")return null;if(t.message==="token expired")return s.warning("登录过期，请重新登录"),null;throw t}return e}}};export{l as a,d as c,i as u};
